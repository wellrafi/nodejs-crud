<%- include('../../partials/header.ejs') %>

<!-- Page Wrapper -->
<div id="wrapper">
	<%- include('../../partials/sidebar.ejs') %>

	<!-- Content Wrapper -->
	<div id="content-wrapper" class="d-flex flex-column">
		<!-- Main Content -->
		<div id="content">
			<%- include('../../partials/navbar.ejs') %>

			<!-- Begin Page Content -->
			<div class="container-fluid">
				<%- include('../../partials/message.ejs') %>

				<!-- Page Heading -->
				<h1 class="h3 mb-4 text-gray-800">Add new item</h1>
				<div class="">
					<form action="/admin/item" method="POST" enctype="multipart/form-data">
						<div class="card mt-4 mb-4">
							<div class="card-header">
								Detail item
							</div>
							<div class="card-body">
								<div class="form-group">
									<label for="title">Title</label>
									<input
										type="text"
										class="form-control"
										id="title"
										name="title"
										aria-describedby="title"
										placeholder="Enter title"
									/>
								</div>
								<div class="form-group">
									<label for="price">Price</label>
									<input
										type="number"
										class="form-control"
										id="price"
										name="price"
										aria-describedby="price"
										placeholder="Enter price"
									/>
								</div>
								<div class="form-group">
									<label for="city">City</label>
									<input
										type="text"
										class="form-control"
										id="city"
										name="city"
										aria-describedby="city"
										placeholder="Enter city"
									/>
								</div>
								<div class="form-group">
									<label for="country">Country</label>
									<input
										type="text"
										class="form-control"
										id="country"
										name="country"
										aria-describedby="country"
										placeholder="Enter country"
									/>
								</div>
								<div class="form-group">
									<label for="category">Category</label>
									<select name="categoryId" id="" class="form-control">
										<option value=""> --- Category --- </option>
										<% for( let i = 0; i < category.length; i++ ) { %>
										<option value="<%= category[i].id %>"><%= category[i].name %> </option>
										<% } %>
									</select>
								</div>
								<div class="form-group">
									<label for="image">Image</label>
									<div>
										<button class="btn btn-primary" type="button" onclick="clickImage()">
											Choose Image
										</button>
										<input
											style="display: none;"
											type="file"
											class="form-control"
											id="image"
											onchange="(changed) => {onChanged(changed)}"
											name="image"
											aria-describedby="image"
											placeholder="Enter image"
											multiple
										/>
										<script>
											function clickImage() {
												let image = document.getElementById('image');
												image.click();
												image.addEventListener('change', function (changed) {
													console.log(changed.target.files[0]);
												});
											}
										</script>
									</div>
								</div>
								<div class="form-group">
									<label for="description">Deskripsi</label>
									<textarea name="description" id="description" class="form-control"></textarea>
								</div>
								
							</div>
						</div>
						<div class="card mt-4 mb-4">
							<div class="card-header">
								Feature
							</div>
							<div class="card-body">
								
							</div>
						</div>
						<div class="card mt-4 mb-4">
							<div class="card-header">
								Activity
							</div>
							<div class="card-body">
								
							</div>
						</div>
						<div>
							<button type="submit" class="btn btn-primary">Submit</button>
						</div>
					</form>
				</div>
			</div>
			<!-- /.container-fluid -->
		</div>
		<!-- End of Main Content -->

		<%- include('../../partials/footer.ejs') %>
	</div>
	<!-- End of Content Wrapper -->
</div>
<!-- End of Page Wrapper -->

<!-- Scroll to Top Button-->
<a class="scroll-to-top rounded" href="#page-top">
	<i class="fas fa-angle-up"></i>
</a>

<!-- Logout Modal-->
<div
	class="modal fade"
	id="logoutModal"
	tabindex="-1"
	role="dialog"
	aria-labelledby="exampleModalLabel"
	aria-hidden="true"
>
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
				<button class="close" type="button" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">Ã—</span>
				</button>
			</div>
			<div class="modal-body">Select "Logout" below if you are ready to end your current session.</div>
			<div class="modal-footer">
				<button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
				<a class="btn btn-primary" href="login.html">Logout</a>
			</div>
		</div>
	</div>
</div>

<%- include('../../partials/js.ejs') %>

<script>
	CKEDITOR.replace('description');
	$(document).ready(function () {
		$('table.dataTable').DataTable();
	});
	window.onload = function () {
		let active = window.location.href.split('#')[1];
		let btnActive = active + '-item-tab' || 'edit-item-tab';
		let tableActive = active + '-item';
		let doc = document.getElementById(btnActive);
		let fom = document.getElementById(tableActive);
		doc.setAttribute('class', 'nav-item nav-link active');
		fom.setAttribute('class', 'tab-pane fade show active');
	};
	function pushUrl(value) {
		let origin = window.location.href.split('#')[0];
		window.location.href = origin + '#' + value;
	}
</script>
